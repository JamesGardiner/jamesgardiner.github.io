<!DOCTYPE html>
<html lang="en-us">
	
  <!-- google_analytic file -->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61555722-1', 'auto');
  ga('send', 'pageview');

</script>
  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  
    
      <script src='/javascript/leaflet.js' type="text/javascript"></script>
    
  

  

  <!-- CSS -->
  
    
  	  <link rel="stylesheet" href="/css/leaflet.css" media="screen" type="text/css">
  	
  

  
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="/public/css/custom.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Ubuntu:400,400italic,700">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  <title>
    
      A basic Leaflet.js map in Jekyll
      James Gardiner
    
  </title>
</head>


  <body class="sidebar-overlay">

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  
  <div class="sidebar-logo">
    <img src="http://www.gravatar.com/avatar/64efb4611c5f7a0f48d81a92c61e64e4?s=120" />
  </div>

  <div id="contact-list" style="text-align:center">
    
      <a href="https://github.com/jamesGardiner">
        <span class="fa-stack fa-lg">
          <i class="fa fa-square-o fa-stack-2x"></i>
          <i class="fa fa-github-alt fa-stack-1x"></i>
        </span>
      </a>
    
  
      <a href="https://twitter.com/_JamesRG">
        <span class="fa-stack fa-lg">
          <i class="fa fa-square-o fa-stack-2x"></i>
          <i class="fa fa-twitter fa-stack-1x"></i>
        </span>
      </a>
    

    
      <a href="https://linkedin.com/in/jrgardiner">
        <span class="fa-stack fa-lg">
          <i class="fa fa-square-o fa-stack-2x"></i>
          <i class="fa fa-linkedin fa-stack-1x"></i>
        </span>
      </a>
    
  </div>

  <div class="sidebar-item">
    <p>A site for my analyses, findings, musings and other helpful stuff.</p>
  </div>
  
  <ul>
    
    <li><a href="/blog/read_sql_pandas">Connecting to Postrges with Pandas and Jupyter</a></li>
    
    <li><a href="/blog/fitbit-data-analysis">Fitbit Data Analysis</a></li>
    
    <li><a href="/blog/police_data_api_in_leaflet_part2">Using the data.police.uk API with Leaflet - part 2</a></li>
    
    <li><a href="/blog/police_data_api_in_leaflet_part1">Using the data.police.uk API with Leaflet</a></li>
    
    <li><a href="/blog/a-basic-leaflet-map-in-jekyll">A basic Leaflet.js map in Jekyll</a></li>
    
  </ul>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/">Home</a>

    
	
    
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="/about/">About me</a>
        
      
    
    <!--<a class="sidebar-nav-item" href="/archive/v1.0.0.zip">Download</a>
    <a class="sidebar-nav-item" href="">GitHub project</a>
    <span class="sidebar-nav-item">Currently v1.0.0</span>-->
  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2016. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">James Gardiner</a>
            <br />
            <small>A blog for all things data</small>
          </h3>
        </div>
      </div>
      <div class="container content">
	    <div class="post">
  <h1 class="post-title">A basic Leaflet.js map in Jekyll</h1>
  <span class="post-date">04 Apr 2015</span>
  <p>In this post I walk through the steps I took to get a working Leaflet.js map in a Jekyll blog post.</p>

<hr />
<!--more-->
<p>I’ve recently started to develop lightweight and responsive apps using Leaflet as opposed to the more heavyweight and fully featured <a href="www.http://openlayers.org">OpenLayers</a> library. That isn’t to say that OpenLayers isn’t a great library; in fact, it’s been around quite some time and is incredibly feature rich. Leaflet however, is more than capable of fulfilling the requirements of most web-mapping projects (and it helps that I find Leaflet a lot quicker to develop with).</p>

<p>According to its homepage <a href="http://http://leafletjs.com">Leaflet.js</a> is a modern open-source JavaScript library for mobile-friendly interactive maps. It comes in at around 33 KB of JavaScript when built, and it has most of the features most developers will ever need for online mapping.</p>

<h3 id="including-leaflet-in-jekyll">Including Leaflet in Jekyll</h3>

<p>Before displaying a Leaflet map in our post, we first have to include the leaflet.js and leaflet.css files in the site, and there are two main ways to achieve this. The first is to include the following code in the <code class="highlighter-rouge">&lt;head&gt;</code> section of the HTML code:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>
<span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css"</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"</span><span class="nt">&gt;&lt;/script&gt;</span>

</code></pre>
</div>

<p>The second is to <a href="https://github.com/Leaflet/Leaflet/releases">download</a> the Leaflet source code from the Leaflet <a href="https://github.com/Leaflet/Leaflet">GitHub repository</a>. This then needs to be built using Node.js. Run the following commands (assuming you have already <a href="http://nodejs.org/">installed Node.js on your machine</a>):</p>

<div class="highlighter-rouge"><pre class="highlight"><code>npm install -g jake
npm install
</code></pre>
</div>

<p>You may need to run these using sudo. Once installed, <code class="highlighter-rouge">cd</code> into the <code class="highlighter-rouge">/Leaflet</code> directory that your downloaded files are saved in and run the command</p>

<div class="highlighter-rouge"><pre class="highlight"><code>jake build
</code></pre>
</div>

<p>This will create a <code class="highlighter-rouge">dist</code> folder where you will find a <code class="highlighter-rouge">leaflet-source.js</code> file, a minified <code class="highlighter-rouge">leaflet.js</code> file for deployment as well as a <code class="highlighter-rouge">leaflet.css</code> file. These now need to be accessible to your jekyll build, so <code class="highlighter-rouge">cd</code> into your <code class="highlighter-rouge">username.github.io</code> folder that contains your jekyll site and run the following commands:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>mkdir javascript
mkdir css

cp path/to/leaflist/dist/leaflet.css css/
cp path/to/leaflet/dist/leaflet.js javascript/
</code></pre>
</div>

<p>To include these in a jekyll blog post, I have used the method outlined by <a href="http://mattgemmell.com/page-specific-assets-with-jekyll/">Matt Gemmell</a>, where the post YAML front matter should include:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>
<span class="nn">---</span>
<span class="s">custom_css</span><span class="pi">:</span> <span class="s">leaflet</span>
<span class="s">custom_js</span><span class="pi">:</span> <span class="s">leaflet</span>
<span class="nn">---</span>

</code></pre>
</div>

<p>and then include the following in the post’s <code class="highlighter-rouge">HEAD</code>:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html">  {% if page.custom_js %}
    {% for js_file in page.custom_js %}	
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">'/javascript/{{ js_file }}.js'</span> <span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;&lt;/script&gt;</span> 
    {% endfor %}
{% endif %}

{% if page.custom_css %}
    {% for stylesheet in page.custom_css %}
    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"/css/{{ stylesheet }}.css"</span> <span class="na">media=</span><span class="s">"screen"</span> <span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
    {% endfor %}
{% endif %}</code></pre></figure>

<p>Then I add a div to the post which will contain the map:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"map"</span> <span class="na">class=</span><span class="s">"map leaflet-container"</span> <span class="na">style=</span><span class="s">"height: 500px; position:relative;"</span><span class="nt">&gt;&lt;/div&gt;</span></code></pre></figure>

<p>followed by this <code class="highlighter-rouge">&lt;script&gt;</code> tag:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script&gt;</span>
<span class="c1">// create the map object and set the cooridnates of the initial view:
</span>
<span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="s1">'map'</span><span class="p">).</span><span class="nx">setView</span><span class="p">([</span><span class="mf">51.4833</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.1833</span><span class="p">],</span> <span class="mi">10</span><span class="p">);</span>

<span class="c1">// create the tile layer with correct attribution:
</span>
<span class="nx">L</span><span class="p">.</span><span class="nx">tileLayer</span><span class="p">(</span><span class="s1">'http://{s}.tiles.mapbox.com/v3/jamesg87.goac2bf1/{z}/{x}/{y}.png'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">attribution</span><span class="p">:</span> <span class="s1">'Map data &amp;copy; &lt;a href="http://openstreetmap.org"&gt;OpenStreetMap&lt;/a&gt; contributors, &lt;a href="http://creativecommons.org/licenses/by-sa/2.0/"&gt;CC-BY-SA&lt;/a&gt;, Imagery © &lt;a href="http://mapbox.com"&gt;Mapbox&lt;/a&gt;'</span><span class="p">,</span>
    <span class="na">maxZoom</span><span class="p">:</span> <span class="mi">18</span>
<span class="p">}).</span><span class="nx">addTo</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span>
<span class="nt">&lt;/script&gt;</span></code></pre></figure>

<p>which initialises the map object, sets the coordinates of the initial view, sets the zoom layer and finally uses <code class="highlighter-rouge">L.tileLayer</code> to call a tile layer from MapBox and add it to the map.</p>

<div id="map" class="map leaflet-container" style="height: 500px; position:relative;"></div>
<script>
// create the map object and set the cooridnates of the initial view:
var map = L.map('map').setView([51.4833, -3.1833], 10);

// create the tile layer with correct attribution:
L.tileLayer('http://{s}.tiles.mapbox.com/v3/jamesg87.goac2bf1/{z}/{x}/{y}.png', {
    attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://mapbox.com">Mapbox</a>',
    maxZoom: 18
}).addTo(map);
</script>

<p>This is an easy way to get a Leaflet.js map up and running on a GitHub hosted Jekyll blog.  I’m hoping to get more walkthroughs up showing further functionality of Leaflet and other open source GIS software, soon.</p>

</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/blog/read_sql_pandas">
            Connecting to Postrges with Pandas and Jupyter
            <small>18 Apr 2016</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/blog/fitbit-data-analysis">
            Fitbit Data Analysis
            <small>03 Apr 2016</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/blog/police_data_api_in_leaflet_part2">
            Using the data.police.uk API with Leaflet - part 2
            <small>05 May 2015</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>

	    <a href="https://twitter.com/share" class="twitter-share-button" data-via="<_JamesRG>">Tweet</a>

<!-- Put this just before the closing body tag -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
	    <!-- disquss file -->

<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'jamesgardiner'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <div class="footer">
          <p>
          &copy; James Gardiner 2016. All rights reserved.
          </p>
        </div>
      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>
	
    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;

          checkbox.checked = false;
        }, false);
      })(document);
    </script>
  </body>
</html>
